.\" $Id: allergy.1,v 1.1 2001-07-28 10:45:31 grahn Exp $
.\" 
.\"
.TH allergy 1 "JUL 2001" "Allergy" "User Manuals"
.SH "NAME"
allergy \- thumbnail and HTML picture gallery creator
.SH "SYNOPSIS"
.B allergy
.I file
.B ...
.SH "DESCRIPTION"
.B Allergy
takes one or more files (or else standard input),
concatenates them,
processes embedded gallery descriptions into HTML code
for displaying thumbnail images
and writes the result to standard output.
.SH "GENERAL INPUT SYNTAX"
Everything in the input outside the gallery descriptions
is output as-is. Presumably, it consists of HTML code.

Input may contain one or more gallery descriptions. These are
delimited as follows:
.IP
.ft CW
\\begin{gallery}
.br
 ...
.br
\\end{gallery}
.LP
The gallery description consists of optional definitions lines
which determine general characteristics of the gallery to be rendered,
followed by a list of file names and descriptions.
.SH "GALLERY DEFINITION SYNTAX"
The following definitions are recognized:
.IP
.ft CW
\\grid{
.IR cols ,
n}
.LP
Layout of the gallery \(em generates a HTML table with
.I cols
columns and enough rows to fit all images.
.br
Default: four columns.
.IP
.ft CW
\\class{
.IR classname }
.LP
Sets the
.B class
attribute on the HTML construct (i.e. the
.BR <table> )
making up the gallery.
This is useful for controlling rendering of the page using CSS.
.br
Default: not set.
.IP 
.ft CW
\\bounded{
.IR width ,
.IR height }
.LP
Specifies the dimensions of the thumbnail image. Images will be scaled
so that they fit in a rectangle of size (
.IR width ,
.IR height ),
while preserving the aspect ratio.
.br
Default: (140,100).
.IP
.ft CW
\\thumb{
.IR substitution }
.LP
Controls the generation of thumbnail filenames from the corresponding
full-size image filename.
.I substitution
is a
.IR perl (1)
expression which is evaluated with
.B $_
set to the file name. The value of the expression is used as the thumbnail name.
.br
Default: '_' prefix and 'jpg' suffix:
.ft CW
s/(.+)\\..+/_$1.jpg/
.SH "GENERATED HTML CODE"
TBD.
.SH "BUGS"
All names of thumbnail images are expected to being
with an underscore ('_'). Thumbnails are never generated
for these files, even if the input explicitly requests it.

The caption text is not rendered.

Are the generated tables browser-friendly, or do the delay rendering
unneccesarily over slow connections?

Since
.B allergy
evaluates arbitrary perl code in its input file,
you should be careful when generating galleries from unknown sources.

The input syntax is messy, brittle and restrictive.

Error handling and error reporting is probably unsatisfactory.
.SH "DEPENDENCIES"
.B allergy
depends on external utilities for converting and scaling thumbnail images.
These are
.BR pmnfile ,
.BR pmnscale
and
various format converters (e.g.
.BR pngtopnm )
from the
.B netpbm
toolkit, and
.BR cjpeg 
and
.BR djpeg
from the
.B libjpeg
distribution
(in Debian Gnu/Linux, at least, the latter two are packaged separately in
.BR libjpeg-progs .)
.SH "AUTHOR"
Jörgen Grahn <jgrahn@algonet.se>
